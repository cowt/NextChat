.media-option-selector {
  margin: 0.25rem 0 0; /* 进一步压缩顶部边距 */
  width: 100%; /* 区域宽度占满父容器，贴齐左侧 */
  text-align: center; /* 使内联块容器可被居中 */

  .selector-container {
    background-color: var(--white);
    border-radius: 0.75rem; /* 稍微减小圆角 */
    box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.08), 0 1px 2px -1px rgba(0, 0, 0, 0.04); /* 减轻阴影 */
    padding: 0; /* 去除内边距，保证卡片区域与容器左边线对齐 */
    border: 1px solid var(--border-in-light);
    width: fit-content; /* 内容多宽就多宽，避免右侧空白 */
    max-width: 100%;
    display: inline-block; /* 包裹边框 */
    margin: 0 auto; /* 水平居中 */
    overflow-x: auto; /* 内容超出时横向滚动 */
    overscroll-behavior-x: contain;
    -ms-overflow-style: none; /* IE/Edge 隐藏滚动条 */
    scrollbar-width: none;    /* Firefox 隐藏滚动条 */

    .selector-title {
      display: none;
    }

    .options-grid {
      display: inline-flex; /* 单行布局 */
      flex-wrap: nowrap; /* 不换行 */
      gap: 0.375rem; /* 增加卡片间距，提升分隔感 */
      justify-content: center; /* 居中排列卡片 */
      align-items: stretch;
      padding: 0.25rem; /* 将间距移到网格而非容器，边线更贴合 */
      width: max-content; /* 按内容宽度渲染，避免占满 */
    }

    .option-card {
      position: relative;
      cursor: pointer;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, transform 0.18s ease;
      transform-origin: center;
      will-change: transform, box-shadow;
      border: 1px solid var(--border-in-light);
      border-radius: 0.25rem; /* 更小的圆角 */
      background-color: var(--white); /* 让卡片边缘形成留白 */
      padding: 2px; /* 卡片内部留白，图片与边框分离 */
      overflow: hidden;
      width: 120px; /* 确保固定宽度 */
      flex: 0 0 120px; /* 单行滚动时固定卡片宽度 */

      &:hover {
        border-color: #93c5fd; /* hover 轻蓝 */
        box-shadow: 0 1px 3px -1px rgba(59, 130, 246, 0.08);
      }

      &.selected {
        border-color: #3b82f6; /* 蓝框 */
        box-shadow: 0 0 0 2px rgba(59,130,246,0.2), 0 10px 22px -8px rgba(59,130,246,0.35);
        transform: scale(1.05); /* 放大卡片，突出选中 */
        background-color: #f0f7ff; /* 轻微底色提升选中感 */
      }

      .image-container {
        position: relative;
        aspect-ratio: 4 / 3;
        background-color: var(--gray);
        border-radius: 0.25rem; /* 图片也做圆角，区分邻近卡片 */
        border: 1px solid var(--border-in-light); /* 加入框线 */
        overflow: hidden; /* 裁剪底纹与阴影 */
        box-shadow: 0 0 0 1px rgba(0,0,0,0.04), 0 2px 6px rgba(0,0,0,0.06); /* 提升同色背景的边界感 */

        /* 底纹：浅棋盘格，提升与白底/浅色图的区分度 */
        &::before {
          content: "";
          position: absolute;
          inset: 0;
          background-image:
            linear-gradient(45deg, rgba(0,0,0,0.035) 25%, transparent 25%),
            linear-gradient(-45deg, rgba(0,0,0,0.035) 25%, transparent 25%),
            linear-gradient(45deg, transparent 75%, rgba(0,0,0,0.035) 75%),
            linear-gradient(-45deg, transparent 75%, rgba(0,0,0,0.035) 75%);
          background-size: 10px 10px;
          background-position: 0 0, 0 5px, 5px -5px, -5px 0;
          z-index: 0;
        }
        max-height: 720px; /* 进一步压缩图片高度 */

        .option-image {
          width: 100%;
          height: 100%;
          object-fit: cover;
          image-rendering: auto;
          position: relative;
          z-index: 1; /* 覆盖底纹 */
        }

        .image-placeholder {
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background-color: var(--gray);
          z-index: 1;

          &.hidden {
            display: none;
          }

          .placeholder-content {
            text-align: center;
            color: var(--gray);

            .placeholder-icon {
              font-size: 1.25rem; /* 缩小占位图标 */
              margin-bottom: 0.25rem; /* 减少图标下边距 */
            }

            .placeholder-text {
              font-size: 0.75rem; /* 保持小字体 */
            }
          }
        }

        .selection-overlay {
          position: absolute;
          inset: 0;
          background-color: rgba(59, 130, 246, 0.08); /* 减轻选中覆盖层透明度 */
          transition: opacity 0.3s;
          z-index: 2;

          &.selected {
            opacity: 1;
          }

          &.unselected {
            opacity: 0;
          }
        }

        .checkbox {
          position: absolute;
          top: 4px; /* 减少顶部距离 */
          right: 4px; /* 减少右侧距离 */
          width: 14px; /* 缩小复选框尺寸 */
          height: 14px;
          border-radius: 50%;
          border: 1.5px solid; /* 减少边框宽度 */
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s;
          z-index: 3;

          &.selected {
            background-color: #3b82f6;
            border-color: #3b82f6;
          }

          &.unselected {
            background-color: var(--white);
            border-color: var(--gray);
          }

          &:hover {
            border-color: var(--gray);
          }

          .check-icon {
            width: 10px; /* 缩小勾选图标 */
            height: 10px;
            display: block;
            image-rendering: -webkit-optimize-contrast;
            backface-visibility: hidden;
            transform: translateZ(0);
            filter: drop-shadow(0 0 1px rgba(0, 0, 0, 0.25));
          }
        }
      }

      .text-content {
        display: none; /* 彻底隐藏文字区域，消除图片下方黑色空白 */
        height: 0;
        padding: 0;
        margin: 0;
      }

      /* 文字卡片容器，外框与图片卡片保持一致 */
      .text-container {
        position: relative;
        aspect-ratio: 4 / 3;
        background-color: var(--white);
        border-radius: 0.25rem;
        border: 1px solid var(--border-in-light);
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem;
        box-shadow: 0 0 0 1px rgba(0,0,0,0.04), 0 2px 6px rgba(0,0,0,0.06);
        max-height: 720px;

        .text-only {
          width: 100%;
          height: 100%;
          display: flex;
          flex-direction: column; /* 上下排布 */
          align-items: flex-start;
          justify-content: flex-start;
          text-align: left;
          padding: 0.375rem; /* 缩小内边距，容纳更多文字 */
          background-color: var(--white);
          z-index: 1;
          gap: 0.2rem;
        }

        .text-only-title {
          /* 上：副标题（小，灰） */
          font-weight: 600;
          font-size: 0.72rem; /* 更小字号 */
          line-height: 0.95rem; /* 更紧凑行高 */
          color: #4b5563;
          overflow: hidden;
          display: -webkit-box;
          -webkit-line-clamp: 1; /* 固定1行，给主文案更多空间 */
          -webkit-box-orient: vertical;
        }

        .text-only-desc {
          /* 下：主文案（大，黑），固定 3 行，底部优先展示 */
          margin-top: auto;
          font-weight: 600;
          font-size: 0.6rem; /* 缩小字号以显示更多字 */
          line-height: 1.0rem; /* 更紧凑行高 */
          color: #111827;
          overflow: hidden;
          display: -webkit-box;
          -webkit-line-clamp: 5; /* 更多行数 */
          -webkit-box-orient: vertical;
        }

        /* 覆盖层与选择指示（复用图片卡片的样式） */
        .selection-overlay {
          position: absolute;
          inset: 0;
          background-color: rgba(59, 130, 246, 0.08);
          transition: opacity 0.3s;
          z-index: 2;

          &.selected { opacity: 1; }
          &.unselected { opacity: 0; }
        }

        .checkbox {
          position: absolute;
          top: 4px;
          right: 4px;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          border: 1.5px solid;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s;
          z-index: 3;

          &.selected { background-color: #3b82f6; border-color: #3b82f6; }
          &.unselected { background-color: var(--white); border-color: var(--gray); }
        }
      }
    }
  }
}

/* 暗黑模式适配 */
@media (prefers-color-scheme: dark) {
  .media-option-selector {
    .selector-container {
      background-color: var(--black);
      border-color: var(--border-in-dark, var(--border-in-light));
      box-shadow: 0 1px 2px rgba(0,0,0,0.6);

      .option-card {
        border-color: var(--border-in-dark, var(--border-in-light));
        background-color: #0f1113; /* 暗黑卡片底色 */

        &:hover { border-color: var(--gray); }
        &.selected { box-shadow: 0 2px 6px -2px rgba(59,130,246,0.25); }

        .image-container { background-color: #202225; border-radius: 0.25rem; border: 1px solid rgba(255,255,255,0.08); }
        .image-container::before {
          content: "";
          position: absolute;
          inset: 0;
          background-image:
            linear-gradient(45deg, rgba(255,255,255,0.04) 25%, transparent 25%),
            linear-gradient(-45deg, rgba(255,255,255,0.04) 25%, transparent 25%),
            linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.04) 75%),
            linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.04) 75%);
          background-size: 10px 10px;
          background-position: 0 0, 0 5px, 5px -5px, -5px 0;
          z-index: 0;
        }

        .text-content {
          background-color: #111214;
          color: #e5e7eb; /* 提升暗黑模式下的整体对比度 */

          .option-title { color: #f3f4f6 !important; opacity: 1 !important; display: none; }
          .option-description { color: #cbd5e1 !important; opacity: 0.9 !important; display: none; }
        }

        .checkbox {
          &.unselected { background-color: #111214; border-color: #4b5563; }
        }
      }
    }
  }
}

/* WebKit 浏览器隐藏滚动条（移动端不出现滑块）*/
.media-option-selector .selector-container::-webkit-scrollbar {
  width: 0px;
  height: 0px;
  background: transparent;
}
